    <!-- 社交栏 -->
    <div class="social-bar">
      <div class="social-icons-left" id="social-left"></div>
      
      <div class="social-avatar-wrapper" id="back-to-top">
        <img src="<%= themeConfig.domain %>/images/avatar.png" alt="<%= themeConfig.siteName %>" class="social-avatar">
        <div class="back-to-top-icon">
          <svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>
        </div>
      </div>
      
      <div class="social-icons-right" id="social-right"></div>
    </div>

    <!-- 新页脚 -->
    <footer id="footer" class="new-footer">
      <!-- 上层：Logo和描述 -->
      <div class="footer-container">
        <div class="footer-left">
          <div class="footer-logo">
            <img src="<%= site.customConfig.footerLogo || '/media/images/gridea.png' %>" alt="<%= themeConfig.siteName %>">
          </div>
          <div class="footer-content">
            <%- site.customConfig.footerHtml || '<p>©' + new Date().getFullYear() + ' ' + themeConfig.siteName + '</p>' %>
          </div>
        </div>
      </div>
      
      <!-- 下层：备案信息和链接 -->
      <div class="footer-bottom">
        <div class="footer-bottom-content">
          <!-- 左侧：备案信息 -->
          <div class="footer-beian">
            <% if (site.customConfig.icpNumber) { %>
              <span class="beian-item"><%= site.customConfig.icpNumber %></span>
            <% } %>
            <% if (site.customConfig.policeNumber) { %>
              <span class="beian-item"><%= site.customConfig.policeNumber %></span>
            <% } %>
            <% if (!site.customConfig.icpNumber && !site.customConfig.policeNumber) { %>
              <span class="beian-item">©<%= new Date().getFullYear() %> <%= themeConfig.siteName %></span>
            <% } %>
          </div>
          
          <!-- 右侧：链接 -->
          <% if (site.customConfig.footerLinks && site.customConfig.footerLinks.length > 0) { %>
          <div class="footer-links">
            <% site.customConfig.footerLinks.forEach(function(link) { %>
              <% if (link.text && link.url) { %>
                <a href="<%= link.url %>" class="footer-link"><%= link.text %></a>
              <% } %>
            <% }); %>
          </div>
          <% } %>
        </div>
      </div>
    </footer>
    
    <div class="clear"></div>

    <script>
      // 用户选择的社交图标（最多8个）
      var selectedSocials = [
        '<%= site.customConfig.social1 %>',
        '<%= site.customConfig.social2 %>',
        '<%= site.customConfig.social3 %>',
        '<%= site.customConfig.social4 %>',
        '<%= site.customConfig.social5 %>',
        '<%= site.customConfig.social6 %>',
        '<%= site.customConfig.social7 %>',
        '<%= site.customConfig.social8 %>'
      ].filter(function(s) { return s && s.trim() !== ''; });
      
      // 所有社交链接配置
      var allSocialLinks = {
        email: { name: 'email', icon: 'email', url: '<%= site.customConfig.email %>' },
        weibo: { name: 'weibo', icon: 'weibo', url: '<%= site.customConfig.weibo %>' },
        x: { name: 'x', icon: 'x', url: '<%= site.customConfig.x %>' },
        bilibili: { name: 'bilibili', icon: 'bilibili', url: '<%= site.customConfig.bilibili %>' },
        qqzone: { name: 'qqzone', icon: 'qq', url: '<%= site.customConfig.qqzone %>' },
        github: { name: 'github', icon: 'github', url: '<%= site.customConfig.github %>' },
        gitee: { name: 'gitee', icon: 'gitee', url: '<%= site.customConfig.gitee %>' },
        douyin: { name: 'douyin', icon: 'douyin', url: '<%= site.customConfig.douyin %>' },
        youtube: { name: 'youtube', icon: 'youtube', url: '<%= site.customConfig.youtube %>' },
        facebook: { name: 'facebook', icon: 'facebook', url: '<%= site.customConfig.facebook %>' },
        instagram: { name: 'instagram', icon: 'instagram', url: '<%= site.customConfig.instagram %>' },
        telegram: { name: 'telegram', icon: 'telegram', url: '<%= site.customConfig.telegram %>' },
        feed: { name: 'feed', icon: 'feed', url: '<%= site.customConfig.feed %>' }
      };
      
      // 根据选择过滤
      var socialLinks = selectedSocials
        .map(function(key) { return allSocialLinks[key]; })
        .filter(function(s) { return s && s.url && s.url.trim() !== ''; });

      // 自动分配左右两侧，使数量尽量相等
      var mid = Math.ceil(socialLinks.length / 2);
      var leftLinks = socialLinks.slice(0, mid);
      var rightLinks = socialLinks.slice(mid);

      // SVG 图标
      var icons = {
        email: '<svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>',
        weibo: '<svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M10.098 20.323c-3.977.391-7.414-1.406-7.672-4.02-.259-2.609 2.759-5.047 6.74-5.441 3.979-.394 7.413 1.404 7.671 4.018.259 2.6-2.759 5.049-6.737 5.439l-.002.004zM9.05 17.219c-.384.616-1.208.884-1.829.602-.612-.279-.793-.991-.406-1.593.379-.595 1.176-.861 1.793-.601.622.263.82.972.442 1.592zm1.27-1.627c-.141.237-.449.353-.689.253-.236-.09-.313-.361-.177-.586.138-.227.436-.346.672-.24.239.09.315.36.18.573h.014zm.176-2.719c-1.893-.493-4.033.45-4.857 2.118-.836 1.704-.026 3.591 1.886 4.21 1.983.64 4.318-.341 5.132-2.179.8-1.793-.201-3.642-2.161-4.149zm7.563-1.224c-.346-.105-.578-.172-.4-.621.386-.998.428-1.86.003-2.474-.793-1.158-2.96-1.097-5.454-.032 0 0-.782.343-.583-.277.381-1.236.324-2.272-.27-2.87-1.346-1.358-4.926.045-8.001 3.138C1.134 10.611 0 12.784 0 14.667c0 3.605 4.644 5.8 9.183 5.8 5.954 0 9.914-3.451 9.914-6.193 0-1.653-1.398-2.592-2.878-3.025zm.708-5.913c-.077-.264-.309-.372-.528-.245l-.008.005c-.218.126-.328.389-.251.653.077.266.309.374.528.248.219-.128.329-.39.252-.656l.007-.005zm1.445-1.589c-.27-.876-1.064-1.236-1.771-.803l-.012.007c-.705.433-.93 1.32-.659 2.195.27.876 1.064 1.236 1.771.803.707-.434.931-1.321.659-2.195l.012-.007z"/></svg>',
        x: '<svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>',
        bilibili: '<svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M17.813 4.653h.854c1.51.054 2.769.578 3.773 1.574 1.004.995 1.524 2.249 1.56 3.76v7.36c-.036 1.51-.556 2.769-1.56 3.773s-2.262 1.524-3.773 1.56H5.333c-1.51-.036-2.769-.556-3.773-1.56S.036 18.858 0 17.347v-7.36c.036-1.511.556-2.765 1.56-3.76 1.004-.996 2.262-1.52 3.773-1.574h.774l-1.174-1.12a1.234 1.234 0 0 1-.373-.906c0-.356.124-.658.373-.907l.027-.027c.267-.249.573-.373.92-.373.347 0 .653.124.92.373L9.653 4.44c.071.071.134.142.187.213h4.267a.836.836 0 0 1 .16-.213l2.853-2.747c.267-.249.573-.373.92-.373.347 0 .662.151.929.4.267.249.391.551.391.907 0 .355-.124.657-.373.906zM5.333 7.24c-.746.018-1.373.276-1.88.773-.506.498-.769 1.13-.786 1.894v7.52c.017.764.28 1.395.786 1.893.507.498 1.134.756 1.88.773h13.334c.746-.017 1.373-.275 1.88-.773.506-.498.769-1.129.786-1.893v-7.52c-.017-.765-.28-1.396-.786-1.894-.507-.497-1.134-.755-1.88-.773zM8 11.107c.373 0 .684.124.933.373.25.249.383.569.4.96v1.173c-.017.391-.15.711-.4.96-.249.25-.56.374-.933.374s-.684-.125-.933-.374c-.25-.249-.383-.569-.4-.96V12.44c0-.373.129-.689.386-.947.258-.257.574-.386.947-.386zm8 0c.373 0 .684.124.933.373.25.249.383.569.4.96v1.173c-.017.391-.15.711-.4.96-.249.25-.56.374-.933.374s-.684-.125-.933-.374c-.25-.249-.383-.569-.4-.96V12.44c.017-.391.15-.711.4-.96.249-.249.56-.373.933-.373z"/></svg>',
        qq: '<svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M12.003 2c-2.265 0-6.29 1.364-6.29 7.325v1.195S3.55 14.96 3.55 17.474c0 .665.17 1.025.281 1.025.114 0 .902-.484 1.748-2.072 0 0-.18 2.197 1.904 3.967 0 0-1.77.495-1.77 1.182 0 .686 4.078.43 6.29.43 2.21 0 6.287.257 6.287-.43 0-.687-1.768-1.182-1.768-1.182 2.085-1.77 1.905-3.967 1.905-3.967.845 1.588 1.634 2.072 1.746 2.072.111 0 .283-.36.283-1.025 0-2.514-2.166-6.954-2.166-6.954V9.325C18.29 3.364 14.268 2 12.003 2z"/></svg>',
        github: '<svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>',
        gitee: '<svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M11.984 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.016 0zm6.09 5.333c.328 0 .593.266.593.593v1.778a.593.593 0 0 1-.593.593H9.63v1.037h8.444a.593.593 0 0 1 .593.592v1.778a.593.593 0 0 1-.593.593H9.63v1.037h8.444a.593.593 0 0 1 .593.592v1.778a.593.593 0 0 1-.593.593H9.63v1.036h8.444a.593.593 0 0 1 .593.593v1.778a.593.593 0 0 1-.593.593H5.926a.593.593 0 0 1-.593-.593V5.926a.593.593 0 0 1 .593-.593h12.148z"/></svg>',
        douyin: '<svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/></svg>',
        youtube: '<svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>',
        facebook: '<svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>',
        instagram: '<svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 1 0 0 12.324 6.162 6.162 0 0 0 0-12.324zM12 16a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm6.406-11.845a1.44 1.44 0 1 0 0 2.881 1.44 1.44 0 0 0 0-2.881z"/></svg>',
        telegram: '<svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/></svg>',
        feed: '<svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248-1.796 0-3.252-1.454-3.252-3.248 0-1.794 1.456-3.248 3.252-3.248 1.795.001 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.618 19.198 19.188h4.817c-.044-13.231-10.785-23.97-24.015-24.016v4.828z"/></svg>'
      };

      // 渲染左侧图标
      var leftContainer = document.getElementById('social-left');
      leftLinks.forEach(function(link) {
        var a = document.createElement('a');
        a.href = link.url;
        a.className = 'social-icon';
        a.target = '_blank';
        a.innerHTML = icons[link.icon] || icons.email;
        leftContainer.appendChild(a);
      });

      // 渲染右侧图标
      var rightContainer = document.getElementById('social-right');
      rightLinks.forEach(function(link) {
        var a = document.createElement('a');
        a.href = link.url;
        a.className = 'social-icon';
        a.target = '_blank';
        a.innerHTML = icons[link.icon] || icons.email;
        rightContainer.appendChild(a);
      });

      // 回到顶部功能
      document.getElementById('back-to-top').addEventListener('click', function() {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    </script>

        <% if (site.customConfig.valineID && site.customConfig.valineKey) { %>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min.js"></script>
<script type="text/javascript" src="https://cdn.staticfile.org/valine/1.3.10/Valine.Pure.min.js"></script>
<script>
    new Valine({
        el: '#comments',
        appId: '<%= site.customConfig.valineID %>' ,
        appKey: '<%= site.customConfig.valineKey %>',
        pageSize: 30,
        placeholder: '既然来了，那就留个痕迹吧~',
        visitor: <%= site.customConfig.visitors %> // 阅读量统计
    })
</script>
    <% } %>